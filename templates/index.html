<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Repo Saver</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>GitHub Repo Saver</h1>
            <div class="header-actions">
                <button id="settingsBtn" class="btn btn-secondary" title="Settings">⚙️</button>
                <button id="refreshBtn" class="btn btn-secondary">Refresh Statuses</button>
                <button id="updateAllBtn" class="btn btn-primary">Update All</button>
            </div>
        </header>

        <!-- Settings Panel -->
        <div id="settingsPanel" class="settings-panel" style="display: none;">
            <h3>Settings</h3>
            <div class="settings-row">
                <div class="settings-label">Auto-refresh Interval (seconds)</div>
                <input type="number" id="refreshIntervalInput" class="settings-input" min="1" max="300" value="5">
                <button id="saveSettingsBtn" class="btn btn-primary btn-small">Save</button>
            </div>
        </div>

        <!-- Statistics Panel -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-label">Total Repos</div>
                <div class="stat-value" id="stat-total">0</div>
            </div>
            <div class="stat-card stat-card-active">
                <div class="stat-label">Active</div>
                <div class="stat-value stat-active" id="stat-active">
                    <span id="stat-active-value">0</span>
                </div>
            </div>
            <div class="stat-card stat-card-archived">
                <div class="stat-label">Archived</div>
                <div class="stat-value stat-archived" id="stat-archived">0</div>
            </div>
            <div class="stat-card stat-card-deleted">
                <div class="stat-label">Deleted</div>
                <div class="stat-value stat-deleted" id="stat-deleted">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Archives</div>
                <div class="stat-value" id="stat-archives">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Size</div>
                <div class="stat-value" id="stat-size">0 B</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Last Auto-Update</div>
                <div class="stat-value" id="stat-last-update">Never</div>
            </div>
        </div>

        <!-- Controls Panel -->
        <div class="controls-panel">
            <div class="search-filter-section">
                <input type="text" id="searchInput" placeholder="Search repositories..." class="search-input">
                <select id="statusFilter" class="filter-select">
                    <option value="">All Statuses</option>
                    <option value="active">Active</option>
                    <option value="archived">Archived</option>
                    <option value="deleted">Deleted</option>
                    <option value="error">Error</option>
                </select>
                <button id="selectAllBtn" class="btn btn-secondary">Select All</button>
                <button id="deleteSelectedBtn" class="btn btn-danger">Delete Selected</button>
            </div>
            
            <div class="add-repo-section">
                <input type="text" id="repoUrlInput" placeholder="Paste GitHub repo URL..." class="repo-input">
                <button id="addRepoBtn" class="btn btn-primary">Add Repo</button>
                <button id="bulkUploadBtn" class="btn btn-secondary">Bulk Upload</button>
                <button id="exportBtn" class="btn btn-secondary">Export</button>
                <button id="importBtn" class="btn btn-secondary">Import</button>
            </div>
        </div>

        <!-- Queue Status -->
        <div class="queue-status">
            <span>Queue: <strong id="queueCount">0</strong></span>
            <span>Active: <strong id="activeCount">0</strong></span>
        </div>

        <!-- Repositories Cards -->
        <div class="repos-container">
            <div class="repos-header">
                <div class="repos-header-left">
                    <input type="checkbox" id="selectAllCheckbox">
                    <label for="selectAllCheckbox">Select All</label>
                </div>
                <div class="repos-header-right">
                    <select id="sortSelect" class="sort-select">
                        <option value="url">Sort by URL</option>
                        <option value="description">Sort by Description</option>
                        <option value="status">Sort by Status</option>
                        <option value="last_cloned">Sort by Last Cloned</option>
                        <option value="last_updated">Sort by Last Updated</option>
                    </select>
                </div>
            </div>
            <div id="reposCardsContainer" class="repos-cards">
                <!-- Cards will be populated by JavaScript -->
            </div>
        </div>

        <!-- Log Panel -->
        <div class="log-panel">
            <div class="log-header">
                <h3>Activity Log</h3>
                <button id="clearLogBtn" class="btn btn-small">Clear</button>
            </div>
            <div id="logContent" class="log-content"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="bulkUploadModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Bulk Upload Repositories</h2>
            <p>Paste repository URLs (one per line):</p>
            <textarea id="bulkUrlsTextarea" rows="10" class="bulk-textarea"></textarea>
            <div class="modal-actions">
                <button id="bulkUploadSubmitBtn" class="btn btn-primary">Upload</button>
                <button id="bulkUploadCancelBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <div id="readmeModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close">&times;</span>
            <h2 id="readmeTitle">README</h2>
            <div id="readmeContent" class="readme-content"></div>
        </div>
    </div>

    <div id="archivesModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="archivesTitle">Archived Versions</h2>
            <div id="archivesContent" class="archives-content"></div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-small">
            <h2 id="confirmTitle">Confirm</h2>
            <p id="confirmMessage"></p>
            <div class="modal-actions">
                <button id="confirmOkBtn" class="btn btn-primary">OK</button>
                <button id="confirmCancelBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

